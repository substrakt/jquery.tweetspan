jQuery.fn.tweetspan=function(e,t){if(typeof e=="string"){var n=$(this).data("ts-options");if(typeof n=="undefined"){n={}}n[e]=t;$(this).data("ts-options",n)}};jQuery(document).ready(function(e){function n(e,r,i){var s,o,u,a,f;for(var l in e){u=e[l];if(typeof u=="object"){n(u,r,l);continue}if(typeof i!="undefined"){s=i+"."+l}else{s=l}o=r.find('[data-field="'+s+'"]');if(o.length==0){continue}a=o.attr("data-format");if(a){a=a.split(" ");for(var c=0;c<a.length;c++){f=a[c];if(f){f=t[f];if(typeof f!="undefined"){u=f(u)}}}}if(o[0].tagName.toLowerCase()!="img"){o.html(u)}else{o.attr("src",u)}}}var t={tweet:function(e){var t=/(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/i;e=e.replace(t,"<a href='$1' target='_blank'>$1</a>");t=/(^|\s)#(\w+)/g;e=e.replace(t,"$1<a href='http://search.twitter.com/search?q=%23$2' target='_blank'>#$2</a>");t=/(^|\s)@(\w+)/g;e=e.replace(t,"$1<a href='http://www.twitter.com/$2' target='_blank'>@$2</a>");return e},localtime:function(e){return(new Date(Date.parse(e))).toLocaleString()},timesince:function(e){var t=new Date(e);var n=new Date;var r=Math.round((n-t)/6e4);if(r==0){var i=Math.round((n-t)/1e3);if(i<10){var s="less than 10 seconds ago"}else if(i<20){var s="less than 20 seconds ago"}else{var s="half a minute ago"}}else if(r==1){var i=Math.round((n-t)/1e3);if(i==30){var s="half a minute ago"}else if(i<60){var s="less than a minute ago"}else{var s="a minute ago"}}else if(r<45){var s=r+" minutes ago"}else if(r>44&&r<60){var s="about an hour ago"}else if(r<1440){var o=Math.round(r/60);if(o==1){var s="about an hour ago"}else{var s="about "+o+" hours ago"}}else if(r>1439&&r<2880){var s="a day ago"}else{var u=Math.round(r/1440);var s=u+" days ago"}return s},capfirst:function(e){return e.substr(0,1).toUpperCase()+e.substr(1)}};e(".tweets[data-account]").each(function(){var t=e(this);var r=t.attr("data-account");var i=parseInt(t.attr("data-count"));var s="http://search.twitter.com/search.json?from="+r+"&rpp="+i;e.getJSON(s+"&callback=?",function(e){return function(t){var r=e.find(".tweet");var i=r.parent();var s=e.data("ts-options");var o=typeof t.results!="undefined"?t.results:[];var u;for(var a=0;a<o.length;a++){u=r.clone();n(o[a],u);i.append(u)}r.remove();e.show();if(typeof s=="object"){if(typeof s["callback"]=="function"){s["callback"](e)}}}}(t))}).hide()})