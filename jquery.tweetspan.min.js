jQuery.fn.tweetspan=function(e,t){if(typeof e=="string"){var n=jQuery(this).data("ts-options");if(typeof n=="undefined"){n={}}n[e]=t;jQuery(this).data("ts-options",n)}};jQuery.tweetspan=function(e,t){switch(e){case"endpoint":if(typeof t!="undefined"){jQuery.tweetspan.endpoint=t}return jQuery.tweetspan.endpoint;break}};jQuery.tweetspan.endpoint="http://search.twitter.com/search.json";jQuery(document).ready(function(e){function t(e){var t=e.split(" ");var n=t[0];var r={Jan:0,Feb:1,Mar:2,Apr:3,May:4,Jun:5,Jul:6,Aug:7,Sep:8,Oct:9,Nov:10,Dec:11};var i=t[1];var s=r[i];var o=parseInt(t[2]);var u=t[3].split(":");var a=parseInt(u[0]);var f=parseInt(u[1]);var l=parseInt(u[2]);var c=t[4];var h=parseInt(t[5]);var p=new Date(h,s,o,a,f,l);var d;if(c.substr(0,1)=="+"){c=c.substr(1)}c=parseInt(c);return new Date(p.getTime()+p.getTimezoneOffset()*6e4+36e5*c)}function r(e,t,i){var s,o,u,a,f;for(var l in e){u=e[l];if(typeof u=="object"){r(u,t,l);continue}if(typeof i!="undefined"){s=i+"."+l}else{s=l}o=t.find('[data-field="'+s+'"]');if(o.length==0){continue}a=o.attr("data-format");o.removeAttr("data-format").removeAttr("data-field");if(a){a=a.split(" ");for(var c=0;c<a.length;c++){f=a[c];if(f){f=n[f];if(typeof f!="undefined"){u=f(u)}}}}if(o[0].tagName.toLowerCase()!="img"){o.html(u)}else{o.attr("src",u)}}}var n={tweet:function(e){var t=/(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/i;e=e.replace(t,"<a href='$1' target='_blank'>$1</a>");t=/(^|\s)#(\w+)/g;e=e.replace(t,"$1<a href='http://search.twitter.com/search?q=%23$2' target='_blank'>#$2</a>");t=/(^|\s)@(\w+)/g;e=e.replace(t,"$1<a href='http://www.twitter.com/$2' target='_blank'>@$2</a>");return e},localtime:function(e){return(new t(e)).toLocaleString()},timesince:function(e){var n=new t(e);var r=new Date;var i=Math.round((r-n)/6e4);if(i==0){var s=Math.round((r-n)/1e3);if(s<10){var o="less than 10 seconds ago"}else if(s<20){var o="less than 20 seconds ago"}else{var o="half a minute ago"}}else if(i==1){var s=Math.round((r-n)/1e3);if(s==30){var o="half a minute ago"}else if(s<60){var o="less than a minute ago"}else{var o="a minute ago"}}else if(i<45){var o=i+" minutes ago"}else if(i>44&&i<60){var o="about an hour ago"}else if(i<1440){var u=Math.round(i/60);if(u==1){var o="about an hour ago"}else{var o="about "+u+" hours ago"}}else if(i>1439&&i<2880){var o="a day ago"}else{var a=Math.round(i/1440);var o=a+" days ago"}return o},capfirst:function(e){return e.substr(0,1).toUpperCase()+e.substr(1)}};e(".tweets").each(function(){var t=e(this);var n=t.attr("data-account");var i=t.attr("data-hashtag");var s=parseInt(t.attr("data-count"));var o=e.tweetspan("endpoint");var u={count:s};if(o.indexOf("?")==-1){o+="?"}else{o+="&"}if(n){if(n.substr(0,1)=="@"){u["from"]=n.substr(1)}else{u["from"]=n}}if(i){if(i.substr(0,1)=="#"){u["q"]=i}else{u["q"]="#"+i}}if(!n&&!i){return}o+=e.param(u);e.getJSON(o+"&callback=?",function(e){return function(t){var n=e.find(".tweet");var i=n.parent();var s=e.data("ts-options");var o=typeof t.statuses!="undefined"?t.statuses:[];var u;for(var a=0;a<o.length;a++){u=n.clone();r(o[a],u);i.append(u)}n.remove();e.removeAttr("data-account").removeAttr("data-count").removeAttr("data-hashtag").show();if(typeof s=="object"){if(typeof s["callback"]=="function"){s["callback"](e)}}}}(t))}).hide()})